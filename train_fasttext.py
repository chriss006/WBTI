import pandas as pd
import re
from gensim.models import Word2Vec, FastText
import random


def build_fasttext():
    mapping_dict = {"category": {'레드와인': 0, '화이트와인': 1},
                    "sweet": {'안달': 0.3, '달지않은': 0.3, '달지않고': 0.3, '드라이': 0.3, '안단': 0.3, '안달고': 0.3, '달지않고': 0.3,
                              '달지않은': 0.3,
                              '달지않은거': 0.3, '달지않은거로': 0.3, '달지않은걸로': 0.3, '달지않으며': 0.3, '달지않게': 0.3, '달달하지않으면': 0.3,
                              '달달하지않았으면': 0.3, '달달하지않게': 0.3, '달달하지않은거': 0.3, '달달하지않은걸로': 0.3, '달달하지않은거로': 0.3,
                              '드라이하게': 0.3, '드라이한거': 0.3, '드라이한걸로': 0.3, '드라이한거로': 0.3, '드라이했으면': 0.3, '안달달하게': 0.3,
                              '안달달했으면': 0.3, '안달달하고': 0.3, '안달달한거': 0.3, '안달달한걸로': 0.3, '안달달한거로': 0.3, '안달달한': 0.3,
                              '안단거': 0.3, '안달게': 0.3, '안달며': 0.3, '안단걸로': 0.3, '안단거로': 0.3, '안 단 걸로': 0.3,
                              '달달한': 0.6, '달달하고': 0.6, '달달하지만': 0.6, '달달': 0.6, '달달한거': 0.6, '달달한걸로': 0.6,
                              '달달한거로': 0.6, '달달으면': 0.6, '달달하며': 0.6, '달달하게': 0.6, '달짝지근하게': 0.6, '달짝지근하며': 0.6,
                              '달짝지근한거': 0.6, '달짝지근한거로': 0.6, '달짝지근한걸로': 0.6, '달짝지근했으면': 0.6, '달짝지근하고': 0.6,
                              '달짝지근': 0.6, '덜단': 0.6, '덜단거': 0.6,
                              '단': 0.9, '달콤한': 0.9, '스위트': 0.9, '많이단': 0.9, '단거': 0.9, '단걸로': 0.9, '단거로': 0.9,
                              '단게': 0.9, '달게': 0.9,
                              '달며': 0.9, '달고': 0.9, '달콤하며': 0.9, '달콤하고': 0.9, '달콤한거': 0.9, '달콤한걸로': 0.9, '달콤하게': 0.9,
                              '달콤한거로': 0.9, '달콤': 0.9, '달콤했으면': 0.9, '스위트하고': 0.9, '스위트하며': 0.9, '스위트한거': 0.9,
                              '스위트하게': 0.9,
                              '스위트한걸로': 0.9, '스위트한거로': 0.9, '스위트한': 0.9, '스위트했으면': 0.9, '스위트로': 0.9, '단맛안나는': 0.3,
                              '단맛않나는': 0.3, '단맛이 거의없는': 0.3, '단맛이 잘 안느껴지는': 0.3, '달달하지 않은': 0.3, '달지안은': 0.3,
                              '달지않게': 0.3,
                              '당도 없는': 0.3, '당도가 낮은': 0.3, '당도가 높지 않은': 0.3, '덜단': 0.3, '덜단거': 0.3, '덜단거로': 0.3,
                              '덜단걸로': 0.3,
                              '덜단것으로': 0.3, '덜단맛': 0.3, '덜달게': 0.3, '덜달달한': 0.3, '드라이한': 0.3, '많이 달지 않은': 0.3,
                              '안단': 0.3, '안단맛': 0.3,
                              '않단': 0.3, '단맛이 있는': 0.6, '달달한': 0.6, '달짝지근한': 0.6, '당도 낮은': 0.6, '당도가 있는': 0.6,
                              '당도가 적당한': 0.6,
                              '들척지근한': 0.6, '보통닷맛': 0.6, '적당히 단': 0.6, '적당히 달달한': 0.6, '적당히 달은': 0.6, '적당히단': 0.6,
                              '적당히달달한': 0.6,
                              '단맛': 0.9, '단 맛': 0.9, '단맛나는': 0.9, '달콤한': 0.9, '당도 높은': 0.9, '당도가 높은': 0.9, '스위트한': 0.9},
                    "bold": {'가벼운': 0.3, '라이트': 0.3, '상쾌한': 0.3, '청량한': 0.3, '가볍지만': 0.3, '가벼운걸로': 0.3, '가벼운거': 0.3,
                             '가벼우며': 0.3, '가벼운거로': 0.3, '가볍게': 0.3, '가볍': 0.3, '가벼웠으면': 0.3, '라이트한거': 0.3,
                             '라이트한걸로': 0.3,
                             '라이트한거로': 0.3, '라이트하며': 0.3, '라이트하게': 0.3, '라이트하고': 0.3, '라이트한': 0.3, '라이트했으면': 0.3,
                             '라이트로': 0.3, '무겁지않았으면': 0.3, '무겁지않은걸로': 0.3, '무겁지않은거로': 0.3, '무겁지않은': 0.3, '무겁지않고': 0.3,
                             '무겁지않은거': 0.3, '무겁지않으며': 0.3, '무겁지않게': 0.3, '안무거운': 0.3, '안무거운거': 0.3, '안무겁게': 0.3,
                             '안무거우며': 0.3, '안무거운걸로': 0.3, '안무거운거로': 0.3, '안무거웠으면': 0.3, '안무겁고': 0.3, '상쾌하며': 0.3,
                             '상쾌하게': 0.3, '상쾌하고': 0.3, '상쾌한걸로': 0.3, '상쾌한거': 0.3, '상쾌한거로': 0.3, '상쾌': 0.3, '상쾌했으면': 0.3,
                             '청량하며': 0.3, '청량하게': 0.3, '청량하고': 0.3, '청량한걸로': 0.3, '청량한거': 0.3, '청량한거로': 0.3, '청량': 0.3,
                             '청량했으면': 0.3, '바디감이 있는': 0.6,
                             '가볍지 않은': 0.6, '미디엄': 0.6, '끈적하게': 0.6, '끈적하고': 0.6, '끈적하며': 0.6, '끈적했으면': 0.6,
                             '끈적한거': 0.6,
                             '끈적한걸로': 0.6, '끈적한거로': 0.6, '끈적': 0.6, '가볍지않고': 0.6, '가볍지않은거': 0.6, '가볍지않은걸로': 0.6,
                             '가볍지않은거로': 0.6, '가볍지않게': 0.6, '가볍지않으며': 0.6, '가볍지않았으면': 0.6, '진한거': 0.9, '진한걸로': 0.9,
                             '진한거로': 0.9, '진했으면': 0.9, '진하게': 0.9, '진하며': 0.9, '무거운거': 0.9, '무거운걸로': 0.9, '무거운거로': 0.9,
                             '무거웠으면': 0.9, '무거우며': 0.9, '무겁게': 0.9, '헤비한거': 0.9, '헤비한걸로': 0.9, '헤비한거로': 0.9,
                             '헤비했으면': 0.9,
                             '헤비하게': 0.9, '헤비하고': 0.9, '헤비한': 0.9, '헤비하며': 0.9, '헤비로': 0.9, '풀바디한': 0.9, '풀바디로': 0.9,
                             '풀바디였으면': 0.9, '풀바디한걸로': 0.9, '풀바디한거': 0.9, '풀바디한거로': 0.9, '풀바디하게': 0.9, '풀바디하며': 0.9,
                             '풀바디하고': 0.9, '풀로': 0.6, '풀이였으면': 0.6, '풀인걸로': 0.6, '풀인거': 0.6, '풀인거로': 0.6, '풀하고': 0.6,
                             '진한': 0.9, '진하고': 0.9, '무거운': 0.9, '무겁고': 0.9, '헤비': 0.9, '풀': 0.9, '풀바디': 0.9, '끈적한': 0.9,
                             '무겁지만': 0.9,
                             '묵직한': 0.9, '묵직': 0.9, '묵직하고': 0.9, '가벼운': 0.3, '부드러운': 0.3, '산뜻하게': 0.3, '산뜻한': 0.3,
                             '섬세한': 0.3,
                             '바디감 좋은': 0.6, '살짝 가벼운': 0.6, '살짝 무거운': 0.6, '살짝 무게감 있는': 0.6, '적당한 무게': 0.6,
                             '적당한 바디감이 있는': 0.6,
                             '적당히무거운': 0.6, '견고한': 0.9, '단단한': 0.9, '리치한': 0.9, '무게감 있는': 0.9, '묵직한': 0.9, '밀도 있는': 0.9,
                             '바디감 높은': 0.9,
                             '바디감이 높은': 0.9, '중후한': 0.9, '진한': 0.9, '찐하고': 0.9, '찐한': 0.9, '파워풀한': 0.9, '해비': 0.9,
                             '해비로': 0.9,
                             '해비하게': 0.9, '해비하고': 0.9, '해비하며': 0.9, '해비한': 0.9, '해비한거': 0.9, '해비한거로': 0.9, '해비한걸로': 0.9,
                             '해비했으면': 0.9},
                    "acidic": {'안신': 0.3, '안시고': 0.3, '시지 않은': 0.3, '시지않고': 0.3, '안신거': 0.3, '안신걸로': 0.3, '안신거로': 0.3,
                               '안시었으면': 0.3,
                               '안셨으면': 0.3, '안시며': 0.3, '안시게': 0.3, '시지않게': 0.3, '시지않은걸로': 0.3, '시지않으며': 0.3,
                               '시지않은거': 0.3,
                               '시지않았으면': 0.3, '시지않은거로': 0.3,
                               '새콤한': 0.6, '상큼한': 0.6, '시지만': 0.6, '조금시큼한': 0.6, '상큼하고': 0.6, '상큼한거': 0.6, '상큼한거로': 0.6,
                               '조금신': 0.6,
                               '상큼한걸로': 0.6, '상큼하며': 0.6, '상큼하게': 0.6, '상큼': 0.6, '상큼했으면': 0.6, '새콤하고': 0.6,
                               '새콤한거': 0.6,
                               '새콤한거로': 0.6, '새콤한걸로': 0.6, '새콤하며': 0.6, '새콤하게': 0.6, '새콤': 0.6, '세콤했으면': 0.6,
                               '조금시큼한거로': 0.6,
                               '조금시큼한걸로': 0.6, '조금시큼한거': 0.6, '조금시큼하게': 0.6, '조금시큼하며': 0.6, '조금시큼': 0.6, '조금시큼하고': 0.6,
                               '시고': 0.9, '신': 0.9, '시큼한': 0.9, '시큼하고': 0.9, '신거': 0.9, '신걸로': 0.9, '신거로': 0.9,
                               '셨으면': 0.9, '시게': 0.9,
                               '시었으면': 0.9, '시며': 0.9, '시큼한거': 0.9, '시큼한걸로': 0.9, '시큼한거로': 0.9, '시큼했으면': 0.9, '시큼': 0.9,
                               '덜 신걸로': 0.3,
                               '산도가 낮은': 0.3, '산도없는': 0.3, '산미 없는': 0.3, '산미가 거의 없는': 0.3, '산미가 낮은': 0.3, '산미가 약한': 0.3,
                               '산미가 없는': 0.6, '상큼한': 0.6, '신맛이 안나는': 0.3, '신맛이 없는': 0.3, '산더낮은': 0.3, '산도 있는': 0.6,
                               '산도가 있는': 0.6,
                               '산도가 적당함': 0.6, '산미': 0.6, '산미 낮은': 0.6, '산미 있는': 0.6, '산미가 보통인': 0.6, '산미가 살짝 있는': 0.6,
                               '산미가 있는': 0.6, '산미가 조금 있는': 0.6, '신맛이 보통인': 0.6, '약간 산미 있는': 0.6, '적당한 산도의': 0.6,
                               '적당히 신': 0.6,
                               '산도가 높은': 0.9, '산미가 강한': 0.9, '산미가 높은': 0.9, '새콤한': 0.9, '시큼한': 0.9, '신맛': 0.9,
                               '신맛이 나는': 0.9,
                               '신맛이 있는': 0.9, '아주 산미': 0.9, '아주 신': 0.9},
                    "tannic": {'부드러운': 0.3, '떫은': 0.9, '쓴': 0.9, '타닌감이 높은': 0.9, '타닌감이 낮은': 0.3, '오그라드는': 0.9,
                               '덜 떫은': 0.6, '떫지않은': 0.3,
                               '부드럽지않은': 0.3, '안 떫은': 0.3, '안떫고': 0.3, '많이 떫은': 0.9, '떫지 않은 거': 0.3, '떫지 않은 거로': 0.3,
                               '떫지 않으며': 0.3,
                               '떫지 않게': 0.3, '떫지 않았으면': 0.3, '안 떫고': 0.3, '안 떫은 거로': 0.3, '쓰지 않은': 0.3, '쓰지 않고': 0.3,
                               '안 쓴': 0.3,
                               '안 쓰고': 0.3, '쓰지 않으며': 0.3, '쓴 거': 0.9, '안 쓴거': 0.3, '적당히 쓴': 0.6, '씁쓸하고': 0.9,
                               '쓰며': 0.9, '안 쓰며': 0.3,
                               '덜 쓴': 0.6, '덜 쓰고': 0.6, '덜 쓴거': 0.6, '많이 쓰지 않은': 0.6, '쓰지 않은 거로': 0.3, '씁쓸하지 않고': 0.3,
                               '안 부드러운': 0.9,
                               '거칠지 않은': 0.3, '깔끔한 느낌': 0.3, '덜씁쓸한': 0.3, '떨떠름하지 않은': 0.3, '매끄러운': 0.3,
                               '매끄럽게 넘어가는': 0.3,
                               '목넘김이 가벼운': 0.3, '목넘김이 부드러운': 0.3, '목넘김이 좋은': 0.3, '부드럽게 넘어가는': 0.3, '스무스하게 넘어가는': 0.3,
                               '스무스한': 0.3, '안씁쓸한': 0.3, '타닌감이 없는': 0.3, '타닌이 없는': 0.3, '탄닌감이 낮은': 0.3, '탄닌감이 없는': 0.3,
                               '탄닌이 없는': 0.3,
                               '살짝 스파이시한': 0.6, '적당히 타닌': 0.6, '조금 스파이시한': 0.6, '타닌감이 보통인': 0.6, '타닌감이 있는': 0.6,
                               '타닌감이 적당한': 0.6,
                               '타닌이 보통인': 0.6, '타닌이 있는': 0.6, '탄닌감이 보통인': 0.6, '탄닌이 보통인': 0.6, '탄닌이 있는': 0.6,
                               '떨떠름': 0.9, '떨떠름한': 0.9,
                               '목에 걸리는': 0.9, '스파이시가 강한': 0.9, '스파이시한': 0.9, '쌉싸래하고': 0.9, '쌉싸래한': 0.9, '쌉싸레한': 0.9,
                               '쌉싸름하고': 0.9,
                               '쌉싸름한': 0.9, '쌉쌀한': 0.9, '쌉쓰름하고': 0.9, '쌉쓰름한': 0.9, '쓴': 0.9, '씁쓰레한': 0.9, '씁쓸한': 0.9,
                               '타닌 강한': 0.9, '타닌 쎈': 0.9,
                               '타닌감 높은': 0.9, '타닌감이 강한': 0.9, '타닌이 강한': 0.9, '타닌이 높은': 0.9, '타닌이 많은': 0.9, '타닌이 쎈': 0.9,
                               '탄닌감이 높은': 0.9, '탄닌이 많은': 0.9, '쓰고': 0.9}}

    category = list(mapping_dict['category'].keys())
    sweet = list(mapping_dict['sweet'].keys())
    acidic = list(mapping_dict['acidic'].keys())
    bold = list(mapping_dict['bold'].keys())
    tannic = list(mapping_dict['tannic'].keys())
    vec_train = [category, acidic, bold, sweet, tannic]
    prop_list = ['category', 'acidic', 'bold', 'sweet', 'tannic']

    fasttext = FastText(window=5, min_count=1)
    fasttext.build_vocab(vec_train)
    fasttext.train(vec_train, total_examples=len(vec_train), epochs=500)

    return fasttext

